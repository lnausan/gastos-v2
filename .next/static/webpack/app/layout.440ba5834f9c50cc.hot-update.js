"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/layout",{

/***/ "(app-pages-browser)/./app/globals.css":
/*!*************************!*\
  !*** ./app/globals.css ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"cdee935585a3\");\nif (true) { module.hot.accept() }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9nbG9iYWxzLmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLElBQVUsSUFBSSxpQkFBaUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9sbmF1c2FuL0RvY3VtZW50cy9HYXN0b3MgVjIvYXBwL2dsb2JhbHMuY3NzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiY2RlZTkzNTU4NWEzXCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/globals.css\n"));

/***/ }),

/***/ "(app-pages-browser)/./context/transaction-context.tsx":
/*!*****************************************!*\
  !*** ./context/transaction-context.tsx ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TransactionProvider: () => (/* binding */ TransactionProvider),\n/* harmony export */   useTransactions: () => (/* binding */ useTransactions)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_ui_use_toast__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ui/use-toast */ \"(app-pages-browser)/./components/ui/use-toast.ts\");\n/* harmony import */ var _components_providers_supabase_provider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/providers/supabase-provider */ \"(app-pages-browser)/./components/providers/supabase-provider.tsx\");\n/* harmony import */ var _barrel_optimize_names_format_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=format,subMonths!=!date-fns */ \"(app-pages-browser)/./node_modules/date-fns/subMonths.mjs\");\n/* harmony import */ var _barrel_optimize_names_format_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=format,subMonths!=!date-fns */ \"(app-pages-browser)/./node_modules/date-fns/format.mjs\");\n/* __next_internal_client_entry_do_not_use__ TransactionProvider,useTransactions auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\nconst TransactionContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nfunction TransactionProvider(param) {\n    let { children } = param;\n    _s();\n    const { supabase } = (0,_components_providers_supabase_provider__WEBPACK_IMPORTED_MODULE_3__.useSupabase)();\n    const [transactions, setTransactions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [dollarValues, setDollarValues] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [optimisticTransactions, addOptimisticTransaction] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useOptimistic)(transactions, {\n        \"TransactionProvider.useOptimistic\": (state, param)=>{\n            let { action, data } = param;\n            if (action === \"add\") {\n                return [\n                    ...state,\n                    data\n                ];\n            } else if (action === \"update\") {\n                return state.map({\n                    \"TransactionProvider.useOptimistic\": (t)=>t.id === data.id ? {\n                            ...t,\n                            ...data.transaction\n                        } : t\n                }[\"TransactionProvider.useOptimistic\"]);\n            } else if (action === \"delete\") {\n                return state.filter({\n                    \"TransactionProvider.useOptimistic\": (t)=>t.id !== data.id\n                }[\"TransactionProvider.useOptimistic\"]);\n            }\n            return state;\n        }\n    }[\"TransactionProvider.useOptimistic\"]);\n    const [optimisticDollarValues, addOptimisticDollarValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useOptimistic)(dollarValues, {\n        \"TransactionProvider.useOptimistic\": (state, param)=>{\n            let { action, data } = param;\n            if (action === \"update\") {\n                const existingIndex = state.findIndex({\n                    \"TransactionProvider.useOptimistic.existingIndex\": (d)=>d.month === data.month\n                }[\"TransactionProvider.useOptimistic.existingIndex\"]);\n                if (existingIndex >= 0) {\n                    return state.map({\n                        \"TransactionProvider.useOptimistic\": (d)=>d.month === data.month ? data : d\n                    }[\"TransactionProvider.useOptimistic\"]);\n                } else {\n                    return [\n                        ...state,\n                        data\n                    ];\n                }\n            }\n            return state;\n        }\n    }[\"TransactionProvider.useOptimistic\"]);\n    const { toast } = (0,_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_2__.useToast)();\n    const storageId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useId)();\n    // Cargar transacciones y valores del dólar desde localStorage al iniciar\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"TransactionProvider.useEffect\": ()=>{\n            if (!supabase) return;\n            // Escuchar cambios de autenticación y recargar datos si es necesario\n            const { data: authListener } = supabase.auth.onAuthStateChange({\n                \"TransactionProvider.useEffect\": (event, session)=>{\n                    if (event === \"SIGNED_IN\" && (session === null || session === void 0 ? void 0 : session.user)) {\n                        loadData(session.user) // Reutilizamos loadData pasándole el usuario\n                        ;\n                    } else if (event === \"SIGNED_OUT\") {\n                        console.log(\"Sesión cerrada, limpiando datos\");\n                        setTransactions([]);\n                        setDollarValues([]);\n                        localStorage.removeItem(\"transactions-\".concat(storageId));\n                        localStorage.removeItem(\"dollar-values-\".concat(storageId));\n                    }\n                }\n            }[\"TransactionProvider.useEffect\"]);\n            // 1. Cargar datos de localStorage primero\n            const cachedTransactions = localStorage.getItem(\"transactions-\".concat(storageId));\n            if (cachedTransactions) {\n                try {\n                    const parsedTransactions = JSON.parse(cachedTransactions);\n                    setTransactions(parsedTransactions);\n                    setIsLoading(false) // Ya tenemos datos, no mostrar loading\n                    ;\n                } catch (e) {\n                    console.error('Error al parsear transacciones del localStorage:', e);\n                }\n            }\n            const cachedDollarValues = localStorage.getItem(\"dollar-values-\".concat(storageId));\n            if (cachedDollarValues) {\n                try {\n                    setDollarValues(JSON.parse(cachedDollarValues));\n                } catch (e) {\n                    console.error('Error al parsear valores del dólar del localStorage:', e);\n                }\n            }\n            // 2. Luego cargar desde Supabase en segundo plano\n            const loadData = {\n                \"TransactionProvider.useEffect.loadData\": async (userParam)=>{\n                    try {\n                        const user = userParam ? userParam : (await supabase.auth.getUser()).data.user;\n                        if (!user) {\n                            console.error('No hay usuario autenticado');\n                            return;\n                        }\n                        // Calcular los últimos 6 meses\n                        const today = new Date();\n                        const months = [];\n                        for(let i = 0; i < 6; i++){\n                            const d = (0,_barrel_optimize_names_format_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_4__.subMonths)(today, i);\n                            months.push((0,_barrel_optimize_names_format_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_5__.format)(d, \"yyyy-MM\"));\n                        }\n                        console.log('Buscando transacciones para los meses:', months);\n                        // Traer solo las transacciones de los últimos 6 meses\n                        const { data: transactionsData, error: transactionsError } = await supabase.from('expenses').select('*').eq('user_id', user.id).gte('date', \"\".concat(months[months.length - 1], \"-01\")).lte('date', \"\".concat(months[0], \"-31\")).order('created_at', {\n                            ascending: false\n                        });\n                        if (transactionsError) {\n                            console.error('Error al cargar transacciones:', transactionsError);\n                            throw transactionsError;\n                        }\n                        if (transactionsData) {\n                            console.log('Transacciones cargadas:', transactionsData.length);\n                            setTransactions(transactionsData);\n                            localStorage.setItem(\"transactions-\".concat(storageId), JSON.stringify(transactionsData));\n                        }\n                        console.log('Buscando valores del dólar para los meses:', months);\n                        // Traer todos los valores del dólar del usuario\n                        const loadDollarValues = {\n                            \"TransactionProvider.useEffect.loadData.loadDollarValues\": async ()=>{\n                                if (!supabase) {\n                                    console.error('Supabase no está inicializado');\n                                    return;\n                                }\n                                try {\n                                    // 1. Verificar autenticación\n                                    const userDollar = user;\n                                    if (!userDollar) {\n                                        console.error('No hay usuario autenticado');\n                                        return;\n                                    }\n                                    console.log('Cargando historial de valores del dólar para usuario:', userDollar.id);\n                                    // 2. Cargar todos los valores históricos\n                                    const { data, error } = await supabase.from('dollar_values').select('*').eq('user_id', userDollar.id).order('month', {\n                                        ascending: false\n                                    });\n                                    console.log('Respuesta de la carga de dólares:', {\n                                        data,\n                                        error\n                                    });\n                                    if (error) {\n                                        console.error('Error al cargar valores del dólar:', error);\n                                        return;\n                                    }\n                                    if (!data) {\n                                        console.log('No se encontraron valores del dólar');\n                                        setDollarValues([]);\n                                        localStorage.setItem(\"dollar-values-\".concat(storageId), JSON.stringify([]));\n                                        return;\n                                    }\n                                    console.log('Historial de valores del dólar cargados:', data);\n                                    setDollarValues(data);\n                                    localStorage.setItem(\"dollar-values-\".concat(storageId), JSON.stringify(data));\n                                } catch (error) {\n                                    console.error('Error inesperado al cargar valores del dólar:', error);\n                                    setDollarValues([]);\n                                    localStorage.setItem(\"dollar-values-\".concat(storageId), JSON.stringify([]));\n                                }\n                            }\n                        }[\"TransactionProvider.useEffect.loadData.loadDollarValues\"];\n                        // Ejecutar la carga de datos\n                        await loadDollarValues();\n                    } catch (error) {\n                        console.error('Error detallado al cargar datos:', error);\n                        // No mostrar el error al usuario si ya tenemos datos en localStorage\n                        if (transactions.length === 0) {\n                            toast({\n                                title: 'Error al cargar los datos',\n                                description: error instanceof Error ? error.message : 'Error desconocido',\n                                variant: 'destructive'\n                            });\n                        }\n                    } finally{\n                        setIsLoading(false);\n                    }\n                }\n            }[\"TransactionProvider.useEffect.loadData\"];\n            loadData();\n        }\n    }[\"TransactionProvider.useEffect\"], [\n        supabase\n    ]);\n    // Agregar una nueva transacción\n    const addTransaction = async (transaction)=>{\n        if (!supabase) return;\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) {\n                console.error('No se pudo obtener el usuario autenticado');\n                return;\n            }\n            const expenseToInsert = {\n                amount: transaction.amount,\n                description: transaction.description,\n                date: transaction.date,\n                category_id: transaction.category_id,\n                user_id: user.id,\n                type: transaction.type\n            };\n            console.log('Insertando en Supabase:', expenseToInsert);\n            const { data, error } = await supabase.from('expenses').insert([\n                expenseToInsert\n            ]).select().single();\n            console.log('Respuesta de Supabase:', {\n                data,\n                error\n            });\n            if (error) throw error;\n            // Recargar todas las transacciones para asegurar consistencia\n            const { data: transactionsData, error: transactionsError } = await supabase.from('expenses').select('*').eq('user_id', user.id).order('created_at', {\n                ascending: false\n            });\n            if (transactionsError) throw transactionsError;\n            console.log('Transacciones actualizadas:', transactionsData);\n            setTransactions(transactionsData || []);\n            toast({\n                title: 'Transacción agregada correctamente'\n            });\n        } catch (error) {\n            console.error('Error al agregar transacción:', error);\n            toast({\n                title: 'Error al agregar la transacción'\n            });\n            throw error;\n        }\n    };\n    // Actualizar una transacción existente\n    const updateTransaction = async (id, transaction)=>{\n        if (!supabase) return;\n        try {\n            // Adaptar los campos al esquema de expenses\n            const expenseToUpdate = {};\n            if (transaction.amount !== undefined) expenseToUpdate.amount = transaction.amount;\n            if (transaction.description !== undefined) expenseToUpdate.description = transaction.description;\n            if (transaction.date !== undefined) expenseToUpdate.date = transaction.date;\n            if (transaction.category_id !== undefined) expenseToUpdate.category_id = transaction.category_id;\n            if (transaction.type !== undefined) expenseToUpdate.type = transaction.type;\n            console.log('Actualizando transacción:', {\n                id,\n                ...expenseToUpdate\n            });\n            const { data, error } = await supabase.from('expenses').update(expenseToUpdate).eq('id', id).select().single();\n            if (error) throw error;\n            console.log('Transacción actualizada:', data);\n            // Recargar todas las transacciones para asegurar consistencia\n            const { data: transactionsData, error: transactionsError } = await supabase.from('expenses').select('*').order('created_at', {\n                ascending: false\n            });\n            if (transactionsError) throw transactionsError;\n            console.log('Transacciones actualizadas:', transactionsData);\n            setTransactions(transactionsData || []);\n            toast({\n                title: 'Transacción actualizada correctamente'\n            });\n        } catch (error) {\n            console.error('Error al actualizar transacción:', error);\n            toast({\n                title: 'Error al actualizar la transacción'\n            });\n            throw error;\n        }\n    };\n    // Eliminar una transacción\n    const deleteTransaction = async (id)=>{\n        if (!supabase) return;\n        try {\n            console.log('Eliminando transacción:', id);\n            const { error } = await supabase.from('expenses').delete().eq('id', id);\n            if (error) throw error;\n            // Recargar todas las transacciones para asegurar consistencia\n            const { data: transactionsData, error: transactionsError } = await supabase.from('expenses').select('*').order('created_at', {\n                ascending: false\n            });\n            if (transactionsError) throw transactionsError;\n            console.log('Transacciones actualizadas:', transactionsData);\n            setTransactions(transactionsData || []);\n            toast({\n                title: 'Transacción eliminada correctamente'\n            });\n        } catch (error) {\n            console.error('Error al eliminar transacción:', error);\n            toast({\n                title: 'Error al eliminar la transacción'\n            });\n            throw error;\n        }\n    };\n    // Obtener transacciones de un mes específico\n    const getMonthTransactions = (month)=>{\n        return transactions.filter((t)=>t.date.startsWith(month));\n    };\n    // Obtener resumen de un mes específico\n    const getMonthSummary = (month)=>{\n        const monthTransactions = getMonthTransactions(month);\n        const income = monthTransactions.filter((t)=>t.type === 'ingreso').reduce((sum, t)=>sum + t.amount, 0);\n        const expense = monthTransactions.filter((t)=>t.type === 'gasto').reduce((sum, t)=>sum + t.amount, 0);\n        return {\n            month,\n            income,\n            expense,\n            balance: income - expense\n        };\n    };\n    // Obtener resumen por categoría para un mes específico\n    const getMonthCategorySummary = (month, type)=>{\n        const monthTransactions = getMonthTransactions(month).filter((t)=>t.type === type);\n        const categorySummary = {};\n        monthTransactions.forEach((transaction)=>{\n            if (!categorySummary[transaction.category_id]) {\n                categorySummary[transaction.category_id] = 0;\n            }\n            categorySummary[transaction.category_id] += transaction.amount;\n        });\n        return Object.entries(categorySummary).map((param)=>{\n            let [category, amount] = param;\n            return {\n                category,\n                amount\n            };\n        }).sort((a, b)=>b.amount - a.amount);\n    };\n    // Obtener los últimos 6 meses para el gráfico de barras\n    const getLastSixMonthsSummary = ()=>{\n        const today = new Date();\n        const months = [];\n        for(let i = 0; i < 6; i++){\n            const d = new Date(today.getFullYear(), today.getMonth() - i, 1);\n            const month = \"\".concat(d.getFullYear(), \"-\").concat(String(d.getMonth() + 1).padStart(2, '0'));\n            months.push(month);\n        }\n        return months.map((month)=>getMonthSummary(month)).reverse();\n    };\n    // Obtener todos los meses del año actual para el gráfico de líneas\n    const getAllMonthsSummary = ()=>{\n        // Obtener todos los meses únicos de las transacciones\n        const months = Array.from(new Set(transactions.map((t)=>t.date.substring(0, 7)))).sort((a, b)=>b.localeCompare(a)) // Ordenar de más reciente a más antiguo\n        ;\n        return months.map((month)=>{\n            const monthTransactions = transactions.filter((t)=>t.date.startsWith(month));\n            const income = monthTransactions.filter((t)=>t.type === 'ingreso').reduce((sum, t)=>sum + Number(t.amount), 0);\n            const expense = monthTransactions.filter((t)=>t.type === 'gasto').reduce((sum, t)=>sum + Number(t.amount), 0);\n            return {\n                month,\n                income,\n                expense,\n                balance: income - expense\n            };\n        });\n    };\n    // Obtener el valor del dólar para un mes específico\n    const getDollarValue = (month)=>{\n        return dollarValues.find((d)=>d.month === month);\n    };\n    // Actualizar el valor del dólar para un mes específico\n    const updateDollarValue = async (month, value)=>{\n        if (!supabase) {\n            console.error('Supabase no está inicializado');\n            throw new Error('Supabase no está inicializado');\n        }\n        try {\n            const { data: { user }, error: userError } = await supabase.auth.getUser();\n            if (userError) {\n                console.error('Error al obtener usuario:', userError);\n                throw new Error('Error al obtener usuario');\n            }\n            if (!user) {\n                console.error('No hay usuario autenticado');\n                throw new Error('No hay usuario autenticado');\n            }\n            console.log('Actualizando o insertando valor del dólar:', {\n                user_id: user.id,\n                month,\n                value\n            });\n            const { data: upsertData, error: upsertError } = await supabase.from('dollar_values').upsert([\n                {\n                    user_id: user.id,\n                    month,\n                    value\n                }\n            ], {\n                onConflict: 'user_id,month'\n            }).select().single();\n            if (upsertError) {\n                console.error('Error al insertar o actualizar:', upsertError);\n                throw new Error(\"Error al insertar o actualizar: \".concat(upsertError.message));\n            }\n            setDollarValues((prev)=>{\n                const newValues = [\n                    ...prev\n                ];\n                const index = newValues.findIndex((d)=>d.month === month);\n                if (index >= 0) {\n                    newValues[index] = upsertData;\n                } else {\n                    newValues.push(upsertData);\n                }\n                localStorage.setItem(\"dollar-values-\".concat(storageId), JSON.stringify(newValues));\n                return newValues;\n            });\n            return upsertData;\n        } catch (error) {\n            console.error('Error al actualizar el valor del dólar:', error);\n            throw error;\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TransactionContext.Provider, {\n        value: {\n            transactions,\n            dollarValues,\n            addTransaction,\n            updateTransaction,\n            deleteTransaction,\n            getMonthTransactions,\n            getMonthSummary,\n            getLastSixMonthsSummary,\n            getAllMonthsSummary,\n            getDollarValue,\n            updateDollarValue,\n            getMonthCategorySummary,\n            isLoading\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/lnausan/Documents/Gastos V2/context/transaction-context.tsx\",\n        lineNumber: 487,\n        columnNumber: 5\n    }, this);\n}\n_s(TransactionProvider, \"BfKdZl4tHdqFexW0dynwWq34vGQ=\", false, function() {\n    return [\n        _components_providers_supabase_provider__WEBPACK_IMPORTED_MODULE_3__.useSupabase,\n        react__WEBPACK_IMPORTED_MODULE_1__.useOptimistic,\n        react__WEBPACK_IMPORTED_MODULE_1__.useOptimistic,\n        _components_ui_use_toast__WEBPACK_IMPORTED_MODULE_2__.useToast,\n        react__WEBPACK_IMPORTED_MODULE_1__.useId\n    ];\n});\n_c = TransactionProvider;\nfunction useTransactions() {\n    _s1();\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(TransactionContext);\n    if (context === undefined) {\n        throw new Error(\"useTransactions must be used within a TransactionProvider\");\n    }\n    return context;\n}\n_s1(useTransactions, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"TransactionProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbnRleHQvdHJhbnNhY3Rpb24tY29udGV4dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFJNkc7QUFFekQ7QUFDa0I7QUFFMUI7QUFrQjVDLE1BQU1VLG1DQUFxQlYsb0RBQWFBLENBQXFDVztBQUV0RSxTQUFTQyxvQkFBb0IsS0FBMkM7UUFBM0MsRUFBRUMsUUFBUSxFQUFpQyxHQUEzQzs7SUFDbEMsTUFBTSxFQUFFQyxRQUFRLEVBQUUsR0FBR1Asb0ZBQVdBO0lBQ2hDLE1BQU0sQ0FBQ1EsY0FBY0MsZ0JBQWdCLEdBQUdiLCtDQUFRQSxDQUFnQixFQUFFO0lBQ2xFLE1BQU0sQ0FBQ2MsY0FBY0MsZ0JBQWdCLEdBQUdmLCtDQUFRQSxDQUFnQixFQUFFO0lBQ2xFLE1BQU0sQ0FBQ2dCLFdBQVdDLGFBQWEsR0FBR2pCLCtDQUFRQSxDQUFDO0lBRTNDLE1BQU0sQ0FBQ2tCLHdCQUF3QkMseUJBQXlCLEdBQUdqQixvREFBYUEsQ0FHdEVVOzZDQUFjLENBQUNRO2dCQUFPLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFFO1lBQ3RDLElBQUlELFdBQVcsT0FBTztnQkFDcEIsT0FBTzt1QkFBSUQ7b0JBQU9FO2lCQUFLO1lBQ3pCLE9BQU8sSUFBSUQsV0FBVyxVQUFVO2dCQUM5QixPQUFPRCxNQUFNRyxHQUFHO3lEQUFDLENBQUNDLElBQU9BLEVBQUVDLEVBQUUsS0FBS0gsS0FBS0csRUFBRSxHQUFHOzRCQUFFLEdBQUdELENBQUM7NEJBQUUsR0FBR0YsS0FBS0ksV0FBVzt3QkFBQyxJQUFJRjs7WUFDOUUsT0FBTyxJQUFJSCxXQUFXLFVBQVU7Z0JBQzlCLE9BQU9ELE1BQU1PLE1BQU07eURBQUMsQ0FBQ0gsSUFBTUEsRUFBRUMsRUFBRSxLQUFLSCxLQUFLRyxFQUFFOztZQUM3QztZQUNBLE9BQU9MO1FBQ1Q7O0lBRUEsTUFBTSxDQUFDUSx3QkFBd0JDLHlCQUF5QixHQUFHM0Isb0RBQWFBLENBR3RFWTs2Q0FBYyxD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QUN6QixNQUFNLElBQUlzRSxNQUFNO0lBQ2xCO0lBQ0EsT0FBTzZEO0FBQ1Q7SUFOZ0JEIiwic291cmNlcyI6WyIvVXNlcnMvbG5hdXNhbi9Eb2N1bWVudHMvR2FzdG9zIFYyL2NvbnRleHQvdHJhbnNhY3Rpb24tY29udGV4dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCJcblxuaW1wb3J0IHR5cGUgUmVhY3QgZnJvbSBcInJlYWN0XCJcblxuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlSWQsIHVzZU9wdGltaXN0aWMsIHN0YXJ0VHJhbnNpdGlvbiB9IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgdHlwZSB7IFRyYW5zYWN0aW9uLCBNb250aFN1bW1hcnksIERvbGxhclZhbHVlIH0gZnJvbSBcIkAvdHlwZXMvdHJhbnNhY3Rpb25cIlxuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL3VzZS10b2FzdFwiXG5pbXBvcnQgeyB1c2VTdXBhYmFzZSB9IGZyb20gJ0AvY29tcG9uZW50cy9wcm92aWRlcnMvc3VwYWJhc2UtcHJvdmlkZXInXG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3Nvbm5lcidcbmltcG9ydCB7IGZvcm1hdCwgc3ViTW9udGhzIH0gZnJvbSBcImRhdGUtZm5zXCJcblxuaW50ZXJmYWNlIFRyYW5zYWN0aW9uQ29udGV4dFR5cGUge1xuICB0cmFuc2FjdGlvbnM6IFRyYW5zYWN0aW9uW11cbiAgZG9sbGFyVmFsdWVzOiBEb2xsYXJWYWx1ZVtdXG4gIGFkZFRyYW5zYWN0aW9uOiAodHJhbnNhY3Rpb246IE9taXQ8VHJhbnNhY3Rpb24sIFwiaWRcIiB8IFwiY3JlYXRlZF9hdFwiIHwgXCJ1cGRhdGVkX2F0XCIgfCBcInVzZXJfaWRcIj4pID0+IFByb21pc2U8dm9pZD5cbiAgdXBkYXRlVHJhbnNhY3Rpb246IChpZDogc3RyaW5nLCB0cmFuc2FjdGlvbjogUGFydGlhbDxUcmFuc2FjdGlvbj4pID0+IFByb21pc2U8dm9pZD5cbiAgZGVsZXRlVHJhbnNhY3Rpb246IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+XG4gIGdldE1vbnRoVHJhbnNhY3Rpb25zOiAobW9udGg6IHN0cmluZykgPT4gVHJhbnNhY3Rpb25bXVxuICBnZXRNb250aFN1bW1hcnk6IChtb250aDogc3RyaW5nKSA9PiBNb250aFN1bW1hcnlcbiAgZ2V0TGFzdFNpeE1vbnRoc1N1bW1hcnk6ICgpID0+IE1vbnRoU3VtbWFyeVtdXG4gIGdldEFsbE1vbnRoc1N1bW1hcnk6ICgpID0+IE1vbnRoU3VtbWFyeVtdXG4gIGdldERvbGxhclZhbHVlOiAobW9udGg6IHN0cmluZykgPT4gRG9sbGFyVmFsdWUgfCB1bmRlZmluZWRcbiAgdXBkYXRlRG9sbGFyVmFsdWU6IChtb250aDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKSA9PiBQcm9taXNlPHZvaWQ+XG4gIGdldE1vbnRoQ2F0ZWdvcnlTdW1tYXJ5OiAobW9udGg6IHN0cmluZywgdHlwZTogXCJpbmdyZXNvXCIgfCBcImdhc3RvXCIpID0+IHsgY2F0ZWdvcnk6IHN0cmluZzsgYW1vdW50OiBudW1iZXIgfVtdXG4gIGlzTG9hZGluZzogYm9vbGVhblxufVxuXG5jb25zdCBUcmFuc2FjdGlvbkNvbnRleHQgPSBjcmVhdGVDb250ZXh0PFRyYW5zYWN0aW9uQ29udGV4dFR5cGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZClcblxuZXhwb3J0IGZ1bmN0aW9uIFRyYW5zYWN0aW9uUHJvdmlkZXIoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xuICBjb25zdCB7IHN1cGFiYXNlIH0gPSB1c2VTdXBhYmFzZSgpXG4gIGNvbnN0IFt0cmFuc2FjdGlvbnMsIHNldFRyYW5zYWN0aW9uc10gPSB1c2VTdGF0ZTxUcmFuc2FjdGlvbltdPihbXSlcbiAgY29uc3QgW2RvbGxhclZhbHVlcywgc2V0RG9sbGFyVmFsdWVzXSA9IHVzZVN0YXRlPERvbGxhclZhbHVlW10+KFtdKVxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSlcblxuICBjb25zdCBbb3B0aW1pc3RpY1RyYW5zYWN0aW9ucywgYWRkT3B0aW1pc3RpY1RyYW5zYWN0aW9uXSA9IHVzZU9wdGltaXN0aWM8XG4gICAgVHJhbnNhY3Rpb25bXSxcbiAgICB7IGFjdGlvbjogXCJhZGRcIiB8IFwidXBkYXRlXCIgfCBcImRlbGV0ZVwiOyBkYXRhOiBhbnkgfVxuICA+KHRyYW5zYWN0aW9ucywgKHN0YXRlLCB7IGFjdGlvbiwgZGF0YSB9KSA9PiB7XG4gICAgaWYgKGFjdGlvbiA9PT0gXCJhZGRcIikge1xuICAgICAgcmV0dXJuIFsuLi5zdGF0ZSwgZGF0YV1cbiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJ1cGRhdGVcIikge1xuICAgICAgcmV0dXJuIHN0YXRlLm1hcCgodCkgPT4gKHQuaWQgPT09IGRhdGEuaWQgPyB7IC4uLnQsIC4uLmRhdGEudHJhbnNhY3Rpb24gfSA6IHQpKVxuICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBcImRlbGV0ZVwiKSB7XG4gICAgICByZXR1cm4gc3RhdGUuZmlsdGVyKCh0KSA9PiB0LmlkICE9PSBkYXRhLmlkKVxuICAgIH1cbiAgICByZXR1cm4gc3RhdGVcbiAgfSlcblxuICBjb25zdCBbb3B0aW1pc3RpY0RvbGxhclZhbHVlcywgYWRkT3B0aW1pc3RpY0RvbGxhclZhbHVlXSA9IHVzZU9wdGltaXN0aWM8XG4gICAgRG9sbGFyVmFsdWVbXSxcbiAgICB7IGFjdGlvbjogXCJ1cGRhdGVcIjsgZGF0YTogYW55IH1cbiAgPihkb2xsYXJWYWx1ZXMsIChzdGF0ZSwgeyBhY3Rpb24sIGRhdGEgfSkgPT4ge1xuICAgIGlmIChhY3Rpb24gPT09IFwidXBkYXRlXCIpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBzdGF0ZS5maW5kSW5kZXgoKGQpID0+IGQubW9udGggPT09IGRhdGEubW9udGgpXG4gICAgICBpZiAoZXhpc3RpbmdJbmRleCA+PSAwKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5tYXAoKGQpID0+IChkLm1vbnRoID09PSBkYXRhLm1vbnRoID8gZGF0YSA6IGQpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFsuLi5zdGF0ZSwgZGF0YV1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0YXRlXG4gIH0pXG5cbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKVxuICBjb25zdCBzdG9yYWdlSWQgPSB1c2VJZCgpXG5cbiAgLy8gQ2FyZ2FyIHRyYW5zYWNjaW9uZXMgeSB2YWxvcmVzIGRlbCBkw7NsYXIgZGVzZGUgbG9jYWxTdG9yYWdlIGFsIGluaWNpYXJcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXN1cGFiYXNlKSByZXR1cm5cblxuICAgIC8vIEVzY3VjaGFyIGNhbWJpb3MgZGUgYXV0ZW50aWNhY2nDs24geSByZWNhcmdhciBkYXRvcyBzaSBlcyBuZWNlc2FyaW9cbiAgICBjb25zdCB7IGRhdGE6IGF1dGhMaXN0ZW5lciB9ID0gc3VwYWJhc2UuYXV0aC5vbkF1dGhTdGF0ZUNoYW5nZSgoZXZlbnQsIHNlc3Npb24pID0+IHtcbiAgICAgIGlmIChldmVudCA9PT0gXCJTSUdORURfSU5cIiAmJiBzZXNzaW9uPy51c2VyKSB7XG4gICAgICAgIGxvYWREYXRhKHNlc3Npb24udXNlcikgLy8gUmV1dGlsaXphbW9zIGxvYWREYXRhIHBhc8OhbmRvbGUgZWwgdXN1YXJpb1xuICAgICAgfSBlbHNlIGlmIChldmVudCA9PT0gXCJTSUdORURfT1VUXCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJTZXNpw7NuIGNlcnJhZGEsIGxpbXBpYW5kbyBkYXRvc1wiKVxuICAgICAgICBzZXRUcmFuc2FjdGlvbnMoW10pXG4gICAgICAgIHNldERvbGxhclZhbHVlcyhbXSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYHRyYW5zYWN0aW9ucy0ke3N0b3JhZ2VJZH1gKVxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgZG9sbGFyLXZhbHVlcy0ke3N0b3JhZ2VJZH1gKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyAxLiBDYXJnYXIgZGF0b3MgZGUgbG9jYWxTdG9yYWdlIHByaW1lcm9cbiAgICBjb25zdCBjYWNoZWRUcmFuc2FjdGlvbnMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgdHJhbnNhY3Rpb25zLSR7c3RvcmFnZUlkfWApXG4gICAgaWYgKGNhY2hlZFRyYW5zYWN0aW9ucykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHJhbnNhY3Rpb25zID0gSlNPTi5wYXJzZShjYWNoZWRUcmFuc2FjdGlvbnMpXG4gICAgICAgIHNldFRyYW5zYWN0aW9ucyhwYXJzZWRUcmFuc2FjdGlvbnMpXG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSkgLy8gWWEgdGVuZW1vcyBkYXRvcywgbm8gbW9zdHJhciBsb2FkaW5nXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIHBhcnNlYXIgdHJhbnNhY2Npb25lcyBkZWwgbG9jYWxTdG9yYWdlOicsIGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2FjaGVkRG9sbGFyVmFsdWVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYGRvbGxhci12YWx1ZXMtJHtzdG9yYWdlSWR9YClcbiAgICBpZiAoY2FjaGVkRG9sbGFyVmFsdWVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBzZXREb2xsYXJWYWx1ZXMoSlNPTi5wYXJzZShjYWNoZWREb2xsYXJWYWx1ZXMpKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBwYXJzZWFyIHZhbG9yZXMgZGVsIGTDs2xhciBkZWwgbG9jYWxTdG9yYWdlOicsIGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMi4gTHVlZ28gY2FyZ2FyIGRlc2RlIFN1cGFiYXNlIGVuIHNlZ3VuZG8gcGxhbm9cbiAgICBjb25zdCBsb2FkRGF0YSA9IGFzeW5jICh1c2VyUGFyYW0/OiBhbnkpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSB1c2VyUGFyYW1cbiAgICAgICAgICA/IHVzZXJQYXJhbVxuICAgICAgICAgIDogKGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpKS5kYXRhLnVzZXJcblxuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyBoYXkgdXN1YXJpbyBhdXRlbnRpY2FkbycpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxjdWxhciBsb3Mgw7psdGltb3MgNiBtZXNlc1xuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKClcbiAgICAgICAgY29uc3QgbW9udGhzOiBzdHJpbmdbXSA9IFtdXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZCA9IHN1Yk1vbnRocyh0b2RheSwgaSlcbiAgICAgICAgICBtb250aHMucHVzaChmb3JtYXQoZCwgXCJ5eXl5LU1NXCIpKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0J1c2NhbmRvIHRyYW5zYWNjaW9uZXMgcGFyYSBsb3MgbWVzZXM6JywgbW9udGhzKVxuXG4gICAgICAgIC8vIFRyYWVyIHNvbG8gbGFzIHRyYW5zYWNjaW9uZXMgZGUgbG9zIMO6bHRpbW9zIDYgbWVzZXNcbiAgICAgICAgY29uc3QgeyBkYXRhOiB0cmFuc2FjdGlvbnNEYXRhLCBlcnJvcjogdHJhbnNhY3Rpb25zRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ2V4cGVuc2VzJylcbiAgICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VyLmlkKVxuICAgICAgICAgIC5ndGUoJ2RhdGUnLCBgJHttb250aHNbbW9udGhzLmxlbmd0aCAtIDFdfS0wMWApXG4gICAgICAgICAgLmx0ZSgnZGF0ZScsIGAke21vbnRoc1swXX0tMzFgKVxuICAgICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gICAgICAgIGlmICh0cmFuc2FjdGlvbnNFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGNhcmdhciB0cmFuc2FjY2lvbmVzOicsIHRyYW5zYWN0aW9uc0Vycm9yKVxuICAgICAgICAgIHRocm93IHRyYW5zYWN0aW9uc0Vycm9yXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhbnNhY3Rpb25zRGF0YSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdUcmFuc2FjY2lvbmVzIGNhcmdhZGFzOicsIHRyYW5zYWN0aW9uc0RhdGEubGVuZ3RoKVxuICAgICAgICAgIHNldFRyYW5zYWN0aW9ucyh0cmFuc2FjdGlvbnNEYXRhKVxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGB0cmFuc2FjdGlvbnMtJHtzdG9yYWdlSWR9YCwgSlNPTi5zdHJpbmdpZnkodHJhbnNhY3Rpb25zRGF0YSkpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygnQnVzY2FuZG8gdmFsb3JlcyBkZWwgZMOzbGFyIHBhcmEgbG9zIG1lc2VzOicsIG1vbnRocylcblxuICAgICAgICAvLyBUcmFlciB0b2RvcyBsb3MgdmFsb3JlcyBkZWwgZMOzbGFyIGRlbCB1c3VhcmlvXG4gICAgICAgIGNvbnN0IGxvYWREb2xsYXJWYWx1ZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2Ugbm8gZXN0w6EgaW5pY2lhbGl6YWRvJylcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyAxLiBWZXJpZmljYXIgYXV0ZW50aWNhY2nDs25cbiAgICAgICAgICAgIGNvbnN0IHVzZXJEb2xsYXIgPSB1c2VyXG4gICAgICAgICAgICBpZiAoIXVzZXJEb2xsYXIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gaGF5IHVzdWFyaW8gYXV0ZW50aWNhZG8nKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NhcmdhbmRvIGhpc3RvcmlhbCBkZSB2YWxvcmVzIGRlbCBkw7NsYXIgcGFyYSB1c3VhcmlvOicsIHVzZXJEb2xsYXIuaWQpXG5cbiAgICAgICAgICAgIC8vIDIuIENhcmdhciB0b2RvcyBsb3MgdmFsb3JlcyBoaXN0w7NyaWNvc1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgLmZyb20oJ2RvbGxhcl92YWx1ZXMnKVxuICAgICAgICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlckRvbGxhci5pZClcbiAgICAgICAgICAgICAgLm9yZGVyKCdtb250aCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzcHVlc3RhIGRlIGxhIGNhcmdhIGRlIGTDs2xhcmVzOicsIHsgZGF0YSwgZXJyb3IgfSlcblxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGNhcmdhciB2YWxvcmVzIGRlbCBkw7NsYXI6JywgZXJyb3IpXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHNlIGVuY29udHJhcm9uIHZhbG9yZXMgZGVsIGTDs2xhcicpXG4gICAgICAgICAgICAgIHNldERvbGxhclZhbHVlcyhbXSlcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGRvbGxhci12YWx1ZXMtJHtzdG9yYWdlSWR9YCwgSlNPTi5zdHJpbmdpZnkoW10pKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0hpc3RvcmlhbCBkZSB2YWxvcmVzIGRlbCBkw7NsYXIgY2FyZ2Fkb3M6JywgZGF0YSlcbiAgICAgICAgICAgIHNldERvbGxhclZhbHVlcyhkYXRhKVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGRvbGxhci12YWx1ZXMtJHtzdG9yYWdlSWR9YCwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG5cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW5lc3BlcmFkbyBhbCBjYXJnYXIgdmFsb3JlcyBkZWwgZMOzbGFyOicsIGVycm9yKVxuICAgICAgICAgICAgc2V0RG9sbGFyVmFsdWVzKFtdKVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGRvbGxhci12YWx1ZXMtJHtzdG9yYWdlSWR9YCwgSlNPTi5zdHJpbmdpZnkoW10pKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVqZWN1dGFyIGxhIGNhcmdhIGRlIGRhdG9zXG4gICAgICAgIGF3YWl0IGxvYWREb2xsYXJWYWx1ZXMoKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWxsYWRvIGFsIGNhcmdhciBkYXRvczonLCBlcnJvcilcbiAgICAgICAgLy8gTm8gbW9zdHJhciBlbCBlcnJvciBhbCB1c3VhcmlvIHNpIHlhIHRlbmVtb3MgZGF0b3MgZW4gbG9jYWxTdG9yYWdlXG4gICAgICAgIGlmICh0cmFuc2FjdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgICAgdGl0bGU6ICdFcnJvciBhbCBjYXJnYXIgbG9zIGRhdG9zJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdFcnJvciBkZXNjb25vY2lkbycsXG4gICAgICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGxvYWREYXRhKClcbiAgfSwgW3N1cGFiYXNlXSlcblxuICAvLyBBZ3JlZ2FyIHVuYSBudWV2YSB0cmFuc2FjY2nDs25cbiAgY29uc3QgYWRkVHJhbnNhY3Rpb24gPSBhc3luYyAodHJhbnNhY3Rpb246IE9taXQ8VHJhbnNhY3Rpb24sIFwiaWRcIiB8IFwiY3JlYXRlZF9hdFwiIHwgXCJ1cGRhdGVkX2F0XCIgfCBcInVzZXJfaWRcIj4pID0+IHtcbiAgICBpZiAoIXN1cGFiYXNlKSByZXR1cm5cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKVxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHNlIHB1ZG8gb2J0ZW5lciBlbCB1c3VhcmlvIGF1dGVudGljYWRvJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGV4cGVuc2VUb0luc2VydCA9IHtcbiAgICAgICAgYW1vdW50OiB0cmFuc2FjdGlvbi5hbW91bnQsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0cmFuc2FjdGlvbi5kZXNjcmlwdGlvbixcbiAgICAgICAgZGF0ZTogdHJhbnNhY3Rpb24uZGF0ZSxcbiAgICAgICAgY2F0ZWdvcnlfaWQ6IHRyYW5zYWN0aW9uLmNhdGVnb3J5X2lkLFxuICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICB0eXBlOiB0cmFuc2FjdGlvbi50eXBlLFxuICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ0luc2VydGFuZG8gZW4gU3VwYWJhc2U6JywgZXhwZW5zZVRvSW5zZXJ0KVxuXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZXhwZW5zZXMnKVxuICAgICAgICAuaW5zZXJ0KFtleHBlbnNlVG9JbnNlcnRdKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGNvbnNvbGUubG9nKCdSZXNwdWVzdGEgZGUgU3VwYWJhc2U6JywgeyBkYXRhLCBlcnJvciB9KVxuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG5cbiAgICAgIC8vIFJlY2FyZ2FyIHRvZGFzIGxhcyB0cmFuc2FjY2lvbmVzIHBhcmEgYXNlZ3VyYXIgY29uc2lzdGVuY2lhXG4gICAgICBjb25zdCB7IGRhdGE6IHRyYW5zYWN0aW9uc0RhdGEsIGVycm9yOiB0cmFuc2FjdGlvbnNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2V4cGVuc2VzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXIuaWQpXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gICAgICBpZiAodHJhbnNhY3Rpb25zRXJyb3IpIHRocm93IHRyYW5zYWN0aW9uc0Vycm9yXG5cbiAgICAgIGNvbnNvbGUubG9nKCdUcmFuc2FjY2lvbmVzIGFjdHVhbGl6YWRhczonLCB0cmFuc2FjdGlvbnNEYXRhKVxuICAgICAgc2V0VHJhbnNhY3Rpb25zKHRyYW5zYWN0aW9uc0RhdGEgfHwgW10pXG4gICAgICB0b2FzdCh7IHRpdGxlOiAnVHJhbnNhY2Npw7NuIGFncmVnYWRhIGNvcnJlY3RhbWVudGUnIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGFncmVnYXIgdHJhbnNhY2Npw7NuOicsIGVycm9yKVxuICAgICAgdG9hc3QoeyB0aXRsZTogJ0Vycm9yIGFsIGFncmVnYXIgbGEgdHJhbnNhY2Npw7NuJyB9KVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICAvLyBBY3R1YWxpemFyIHVuYSB0cmFuc2FjY2nDs24gZXhpc3RlbnRlXG4gIGNvbnN0IHVwZGF0ZVRyYW5zYWN0aW9uID0gYXN5bmMgKGlkOiBzdHJpbmcsIHRyYW5zYWN0aW9uOiBQYXJ0aWFsPFRyYW5zYWN0aW9uPikgPT4ge1xuICAgIGlmICghc3VwYWJhc2UpIHJldHVyblxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEFkYXB0YXIgbG9zIGNhbXBvcyBhbCBlc3F1ZW1hIGRlIGV4cGVuc2VzXG4gICAgICBjb25zdCBleHBlbnNlVG9VcGRhdGU6IGFueSA9IHt9XG4gICAgICBpZiAodHJhbnNhY3Rpb24uYW1vdW50ICE9PSB1bmRlZmluZWQpIGV4cGVuc2VUb1VwZGF0ZS5hbW91bnQgPSB0cmFuc2FjdGlvbi5hbW91bnRcbiAgICAgIGlmICh0cmFuc2FjdGlvbi5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSBleHBlbnNlVG9VcGRhdGUuZGVzY3JpcHRpb24gPSB0cmFuc2FjdGlvbi5kZXNjcmlwdGlvblxuICAgICAgaWYgKHRyYW5zYWN0aW9uLmRhdGUgIT09IHVuZGVmaW5lZCkgZXhwZW5zZVRvVXBkYXRlLmRhdGUgPSB0cmFuc2FjdGlvbi5kYXRlXG4gICAgICBpZiAodHJhbnNhY3Rpb24uY2F0ZWdvcnlfaWQgIT09IHVuZGVmaW5lZCkgZXhwZW5zZVRvVXBkYXRlLmNhdGVnb3J5X2lkID0gdHJhbnNhY3Rpb24uY2F0ZWdvcnlfaWRcbiAgICAgIGlmICh0cmFuc2FjdGlvbi50eXBlICE9PSB1bmRlZmluZWQpIGV4cGVuc2VUb1VwZGF0ZS50eXBlID0gdHJhbnNhY3Rpb24udHlwZVxuXG4gICAgICBjb25zb2xlLmxvZygnQWN0dWFsaXphbmRvIHRyYW5zYWNjacOzbjonLCB7IGlkLCAuLi5leHBlbnNlVG9VcGRhdGUgfSlcblxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2V4cGVuc2VzJylcbiAgICAgICAgLnVwZGF0ZShleHBlbnNlVG9VcGRhdGUpXG4gICAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKVxuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG5cbiAgICAgIGNvbnNvbGUubG9nKCdUcmFuc2FjY2nDs24gYWN0dWFsaXphZGE6JywgZGF0YSlcblxuICAgICAgLy8gUmVjYXJnYXIgdG9kYXMgbGFzIHRyYW5zYWNjaW9uZXMgcGFyYSBhc2VndXJhciBjb25zaXN0ZW5jaWFcbiAgICAgIGNvbnN0IHsgZGF0YTogdHJhbnNhY3Rpb25zRGF0YSwgZXJyb3I6IHRyYW5zYWN0aW9uc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZXhwZW5zZXMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG5cbiAgICAgIGlmICh0cmFuc2FjdGlvbnNFcnJvcikgdGhyb3cgdHJhbnNhY3Rpb25zRXJyb3JcblxuICAgICAgY29uc29sZS5sb2coJ1RyYW5zYWNjaW9uZXMgYWN0dWFsaXphZGFzOicsIHRyYW5zYWN0aW9uc0RhdGEpXG4gICAgICBzZXRUcmFuc2FjdGlvbnModHJhbnNhY3Rpb25zRGF0YSB8fCBbXSlcbiAgICAgIHRvYXN0KHsgdGl0bGU6ICdUcmFuc2FjY2nDs24gYWN0dWFsaXphZGEgY29ycmVjdGFtZW50ZScgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgYWN0dWFsaXphciB0cmFuc2FjY2nDs246JywgZXJyb3IpXG4gICAgICB0b2FzdCh7IHRpdGxlOiAnRXJyb3IgYWwgYWN0dWFsaXphciBsYSB0cmFuc2FjY2nDs24nIH0pXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8vIEVsaW1pbmFyIHVuYSB0cmFuc2FjY2nDs25cbiAgY29uc3QgZGVsZXRlVHJhbnNhY3Rpb24gPSBhc3luYyAoaWQ6IHN0cmluZykgPT4ge1xuICAgIGlmICghc3VwYWJhc2UpIHJldHVyblxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdFbGltaW5hbmRvIHRyYW5zYWNjacOzbjonLCBpZClcblxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnZXhwZW5zZXMnKS5kZWxldGUoKS5lcSgnaWQnLCBpZClcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuXG4gICAgICAvLyBSZWNhcmdhciB0b2RhcyBsYXMgdHJhbnNhY2Npb25lcyBwYXJhIGFzZWd1cmFyIGNvbnNpc3RlbmNpYVxuICAgICAgY29uc3QgeyBkYXRhOiB0cmFuc2FjdGlvbnNEYXRhLCBlcnJvcjogdHJhbnNhY3Rpb25zRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdleHBlbnNlcycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcblxuICAgICAgaWYgKHRyYW5zYWN0aW9uc0Vycm9yKSB0aHJvdyB0cmFuc2FjdGlvbnNFcnJvclxuXG4gICAgICBjb25zb2xlLmxvZygnVHJhbnNhY2Npb25lcyBhY3R1YWxpemFkYXM6JywgdHJhbnNhY3Rpb25zRGF0YSlcbiAgICAgIHNldFRyYW5zYWN0aW9ucyh0cmFuc2FjdGlvbnNEYXRhIHx8IFtdKVxuICAgICAgdG9hc3QoeyB0aXRsZTogJ1RyYW5zYWNjacOzbiBlbGltaW5hZGEgY29ycmVjdGFtZW50ZScgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgZWxpbWluYXIgdHJhbnNhY2Npw7NuOicsIGVycm9yKVxuICAgICAgdG9hc3QoeyB0aXRsZTogJ0Vycm9yIGFsIGVsaW1pbmFyIGxhIHRyYW5zYWNjacOzbicgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgLy8gT2J0ZW5lciB0cmFuc2FjY2lvbmVzIGRlIHVuIG1lcyBlc3BlY8OtZmljb1xuICBjb25zdCBnZXRNb250aFRyYW5zYWN0aW9ucyA9IChtb250aDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHRyYW5zYWN0aW9ucy5maWx0ZXIoKHQpID0+IHQuZGF0ZS5zdGFydHNXaXRoKG1vbnRoKSlcbiAgfVxuXG4gIC8vIE9idGVuZXIgcmVzdW1lbiBkZSB1biBtZXMgZXNwZWPDrWZpY29cbiAgY29uc3QgZ2V0TW9udGhTdW1tYXJ5ID0gKG1vbnRoOiBzdHJpbmcpOiBNb250aFN1bW1hcnkgPT4ge1xuICAgIGNvbnN0IG1vbnRoVHJhbnNhY3Rpb25zID0gZ2V0TW9udGhUcmFuc2FjdGlvbnMobW9udGgpXG4gICAgY29uc3QgaW5jb21lID0gbW9udGhUcmFuc2FjdGlvbnNcbiAgICAgIC5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ2luZ3Jlc28nKVxuICAgICAgLnJlZHVjZSgoc3VtLCB0KSA9PiBzdW0gKyB0LmFtb3VudCwgMClcbiAgICBjb25zdCBleHBlbnNlID0gbW9udGhUcmFuc2FjdGlvbnNcbiAgICAgIC5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ2dhc3RvJylcbiAgICAgIC5yZWR1Y2UoKHN1bSwgdCkgPT4gc3VtICsgdC5hbW91bnQsIDApXG5cbiAgICByZXR1cm4ge1xuICAgICAgbW9udGgsXG4gICAgICBpbmNvbWUsXG4gICAgICBleHBlbnNlLFxuICAgICAgYmFsYW5jZTogaW5jb21lIC0gZXhwZW5zZSxcbiAgICB9XG4gIH1cblxuICAvLyBPYnRlbmVyIHJlc3VtZW4gcG9yIGNhdGVnb3LDrWEgcGFyYSB1biBtZXMgZXNwZWPDrWZpY29cbiAgY29uc3QgZ2V0TW9udGhDYXRlZ29yeVN1bW1hcnkgPSAobW9udGg6IHN0cmluZywgdHlwZTogJ2luZ3Jlc28nIHwgJ2dhc3RvJykgPT4ge1xuICAgIGNvbnN0IG1vbnRoVHJhbnNhY3Rpb25zID0gZ2V0TW9udGhUcmFuc2FjdGlvbnMobW9udGgpLmZpbHRlcigodCkgPT4gdC50eXBlID09PSB0eXBlKVxuICAgIGNvbnN0IGNhdGVnb3J5U3VtbWFyeTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9XG5cbiAgICBtb250aFRyYW5zYWN0aW9ucy5mb3JFYWNoKCh0cmFuc2FjdGlvbikgPT4ge1xuICAgICAgaWYgKCFjYXRlZ29yeVN1bW1hcnlbdHJhbnNhY3Rpb24uY2F0ZWdvcnlfaWRdKSB7XG4gICAgICAgIGNhdGVnb3J5U3VtbWFyeVt0cmFuc2FjdGlvbi5jYXRlZ29yeV9pZF0gPSAwXG4gICAgICB9XG4gICAgICBjYXRlZ29yeVN1bW1hcnlbdHJhbnNhY3Rpb24uY2F0ZWdvcnlfaWRdICs9IHRyYW5zYWN0aW9uLmFtb3VudFxuICAgIH0pXG5cbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoY2F0ZWdvcnlTdW1tYXJ5KVxuICAgICAgLm1hcCgoW2NhdGVnb3J5LCBhbW91bnRdKSA9PiAoe1xuICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgYW1vdW50LFxuICAgICAgfSkpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5hbW91bnQgLSBhLmFtb3VudClcbiAgfVxuXG4gIC8vIE9idGVuZXIgbG9zIMO6bHRpbW9zIDYgbWVzZXMgcGFyYSBlbCBncsOhZmljbyBkZSBiYXJyYXNcbiAgY29uc3QgZ2V0TGFzdFNpeE1vbnRoc1N1bW1hcnkgPSAoKTogTW9udGhTdW1tYXJ5W10gPT4ge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgIGNvbnN0IG1vbnRoczogc3RyaW5nW10gPSBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSh0b2RheS5nZXRGdWxsWWVhcigpLCB0b2RheS5nZXRNb250aCgpIC0gaSwgMSlcbiAgICAgIGNvbnN0IG1vbnRoID0gYCR7ZC5nZXRGdWxsWWVhcigpfS0ke1N0cmluZyhkLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWBcbiAgICAgIG1vbnRocy5wdXNoKG1vbnRoKVxuICAgIH1cblxuICAgIHJldHVybiBtb250aHMubWFwKChtb250aCkgPT4gZ2V0TW9udGhTdW1tYXJ5KG1vbnRoKSkucmV2ZXJzZSgpXG4gIH1cblxuICAvLyBPYnRlbmVyIHRvZG9zIGxvcyBtZXNlcyBkZWwgYcOxbyBhY3R1YWwgcGFyYSBlbCBncsOhZmljbyBkZSBsw61uZWFzXG4gIGNvbnN0IGdldEFsbE1vbnRoc1N1bW1hcnkgPSAoKTogTW9udGhTdW1tYXJ5W10gPT4ge1xuICAgIC8vIE9idGVuZXIgdG9kb3MgbG9zIG1lc2VzIMO6bmljb3MgZGUgbGFzIHRyYW5zYWNjaW9uZXNcbiAgICBjb25zdCBtb250aHMgPSBBcnJheS5mcm9tKG5ldyBTZXQodHJhbnNhY3Rpb25zLm1hcCh0ID0+IHQuZGF0ZS5zdWJzdHJpbmcoMCwgNykpKSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmxvY2FsZUNvbXBhcmUoYSkpIC8vIE9yZGVuYXIgZGUgbcOhcyByZWNpZW50ZSBhIG3DoXMgYW50aWd1b1xuXG4gICAgcmV0dXJuIG1vbnRocy5tYXAobW9udGggPT4ge1xuICAgICAgY29uc3QgbW9udGhUcmFuc2FjdGlvbnMgPSB0cmFuc2FjdGlvbnMuZmlsdGVyKHQgPT4gdC5kYXRlLnN0YXJ0c1dpdGgobW9udGgpKVxuICAgICAgY29uc3QgaW5jb21lID0gbW9udGhUcmFuc2FjdGlvbnNcbiAgICAgICAgLmZpbHRlcih0ID0+IHQudHlwZSA9PT0gJ2luZ3Jlc28nKVxuICAgICAgICAucmVkdWNlKChzdW0sIHQpID0+IHN1bSArIE51bWJlcih0LmFtb3VudCksIDApXG4gICAgICBjb25zdCBleHBlbnNlID0gbW9udGhUcmFuc2FjdGlvbnNcbiAgICAgICAgLmZpbHRlcih0ID0+IHQudHlwZSA9PT0gJ2dhc3RvJylcbiAgICAgICAgLnJlZHVjZSgoc3VtLCB0KSA9PiBzdW0gKyBOdW1iZXIodC5hbW91bnQpLCAwKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBtb250aCxcbiAgICAgICAgaW5jb21lLFxuICAgICAgICBleHBlbnNlLFxuICAgICAgICBiYWxhbmNlOiBpbmNvbWUgLSBleHBlbnNlXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIE9idGVuZXIgZWwgdmFsb3IgZGVsIGTDs2xhciBwYXJhIHVuIG1lcyBlc3BlY8OtZmljb1xuICBjb25zdCBnZXREb2xsYXJWYWx1ZSA9IChtb250aDogc3RyaW5nKTogRG9sbGFyVmFsdWUgfCB1bmRlZmluZWQgPT4ge1xuICAgIHJldHVybiBkb2xsYXJWYWx1ZXMuZmluZCgoZCkgPT4gZC5tb250aCA9PT0gbW9udGgpXG4gIH1cblxuICAvLyBBY3R1YWxpemFyIGVsIHZhbG9yIGRlbCBkw7NsYXIgcGFyYSB1biBtZXMgZXNwZWPDrWZpY29cbiAgY29uc3QgdXBkYXRlRG9sbGFyVmFsdWUgPSBhc3luYyAobW9udGg6IHN0cmluZywgdmFsdWU6IG51bWJlcikgPT4ge1xuICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIG5vIGVzdMOhIGluaWNpYWxpemFkbycpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIG5vIGVzdMOhIGluaWNpYWxpemFkbycpXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyIH0sIGVycm9yOiB1c2VyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXG4gICAgICBpZiAodXNlckVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIG9idGVuZXIgdXN1YXJpbzonLCB1c2VyRXJyb3IpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgYWwgb2J0ZW5lciB1c3VhcmlvJylcbiAgICAgIH1cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdObyBoYXkgdXN1YXJpbyBhdXRlbnRpY2FkbycpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gaGF5IHVzdWFyaW8gYXV0ZW50aWNhZG8nKVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnQWN0dWFsaXphbmRvIG8gaW5zZXJ0YW5kbyB2YWxvciBkZWwgZMOzbGFyOicsIHsgdXNlcl9pZDogdXNlci5pZCwgbW9udGgsIHZhbHVlIH0pXG5cbiAgICAgIGNvbnN0IHsgZGF0YTogdXBzZXJ0RGF0YSwgZXJyb3I6IHVwc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZG9sbGFyX3ZhbHVlcycpXG4gICAgICAgIC51cHNlcnQoXG4gICAgICAgICAgW3tcbiAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICBtb250aCxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIH1dLFxuICAgICAgICAgIHsgb25Db25mbGljdDogJ3VzZXJfaWQsbW9udGgnIH1cbiAgICAgICAgKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGlmICh1cHNlcnRFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBpbnNlcnRhciBvIGFjdHVhbGl6YXI6JywgdXBzZXJ0RXJyb3IpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgYWwgaW5zZXJ0YXIgbyBhY3R1YWxpemFyOiAke3Vwc2VydEVycm9yLm1lc3NhZ2V9YClcbiAgICAgIH1cblxuICAgICAgc2V0RG9sbGFyVmFsdWVzKHByZXYgPT4ge1xuICAgICAgICBjb25zdCBuZXdWYWx1ZXMgPSBbLi4ucHJldl1cbiAgICAgICAgY29uc3QgaW5kZXggPSBuZXdWYWx1ZXMuZmluZEluZGV4KGQgPT4gZC5tb250aCA9PT0gbW9udGgpXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgbmV3VmFsdWVzW2luZGV4XSA9IHVwc2VydERhdGFcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdWYWx1ZXMucHVzaCh1cHNlcnREYXRhKVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBkb2xsYXItdmFsdWVzLSR7c3RvcmFnZUlkfWAsIEpTT04uc3RyaW5naWZ5KG5ld1ZhbHVlcykpXG4gICAgICAgIHJldHVybiBuZXdWYWx1ZXNcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB1cHNlcnREYXRhXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGFjdHVhbGl6YXIgZWwgdmFsb3IgZGVsIGTDs2xhcjonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8VHJhbnNhY3Rpb25Db250ZXh0LlByb3ZpZGVyXG4gICAgICB2YWx1ZT17e1xuICAgICAgICB0cmFuc2FjdGlvbnMsXG4gICAgICAgIGRvbGxhclZhbHVlcyxcbiAgICAgICAgYWRkVHJhbnNhY3Rpb24sXG4gICAgICAgIHVwZGF0ZVRyYW5zYWN0aW9uLFxuICAgICAgICBkZWxldGVUcmFuc2FjdGlvbixcbiAgICAgICAgZ2V0TW9udGhUcmFuc2FjdGlvbnMsXG4gICAgICAgIGdldE1vbnRoU3VtbWFyeSxcbiAgICAgICAgZ2V0TGFzdFNpeE1vbnRoc1N1bW1hcnksXG4gICAgICAgIGdldEFsbE1vbnRoc1N1bW1hcnksXG4gICAgICAgIGdldERvbGxhclZhbHVlLFxuICAgICAgICB1cGRhdGVEb2xsYXJWYWx1ZSxcbiAgICAgICAgZ2V0TW9udGhDYXRlZ29yeVN1bW1hcnksXG4gICAgICAgIGlzTG9hZGluZyxcbiAgICAgIH19XG4gICAgPlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvVHJhbnNhY3Rpb25Db250ZXh0LlByb3ZpZGVyPlxuICApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VUcmFuc2FjdGlvbnMoKSB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KFRyYW5zYWN0aW9uQ29udGV4dClcbiAgaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInVzZVRyYW5zYWN0aW9ucyBtdXN0IGJlIHVzZWQgd2l0aGluIGEgVHJhbnNhY3Rpb25Qcm92aWRlclwiKVxuICB9XG4gIHJldHVybiBjb250ZXh0XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZUlkIiwidXNlT3B0aW1pc3RpYyIsInVzZVRvYXN0IiwidXNlU3VwYWJhc2UiLCJmb3JtYXQiLCJzdWJNb250aHMiLCJUcmFuc2FjdGlvbkNvbnRleHQiLCJ1bmRlZmluZWQiLCJUcmFuc2FjdGlvblByb3ZpZGVyIiwiY2hpbGRyZW4iLCJzdXBhYmFzZSIsInRyYW5zYWN0aW9ucyIsInNldFRyYW5zYWN0aW9ucyIsImRvbGxhclZhbHVlcyIsInNldERvbGxhclZhbHVlcyIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsIm9wdGltaXN0aWNUcmFuc2FjdGlvbnMiLCJhZGRPcHRpbWlzdGljVHJhbnNhY3Rpb24iLCJzdGF0ZSIsImFjdGlvbiIsImRhdGEiLCJtYXAiLCJ0IiwiaWQiLCJ0cmFuc2FjdGlvbiIsImZpbHRlciIsIm9wdGltaXN0aWNEb2xsYXJWYWx1ZXMiLCJhZGRPcHRpbWlzdGljRG9sbGFyVmFsdWUiLCJleGlzdGluZ0luZGV4IiwiZmluZEluZGV4IiwiZCIsIm1vbnRoIiwidG9hc3QiLCJzdG9yYWdlSWQiLCJhdXRoTGlzdGVuZXIiLCJhdXRoIiwib25BdXRoU3RhdGVDaGFuZ2UiLCJldmVudCIsInNlc3Npb24iLCJ1c2VyIiwibG9hZERhdGEiLCJjb25zb2xlIiwibG9nIiwibG9jYWxTdG9yYWdlIiwicmVtb3ZlSXRlbSIsImNhY2hlZFRyYW5zYWN0aW9ucyIsImdldEl0ZW0iLCJwYXJzZWRUcmFuc2FjdGlvbnMiLCJKU09OIiwicGFyc2UiLCJlIiwiZXJyb3IiLCJjYWNoZWREb2xsYXJWYWx1ZXMiLCJ1c2VyUGFyYW0iLCJnZXRVc2VyIiwidG9kYXkiLCJEYXRlIiwibW9udGhzIiwiaSIsInB1c2giLCJ0cmFuc2FjdGlvbnNEYXRhIiwidHJhbnNhY3Rpb25zRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJndGUiLCJsZW5ndGgiLCJsdGUiLCJvcmRlciIsImFzY2VuZGluZyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJsb2FkRG9sbGFyVmFsdWVzIiwidXNlckRvbGxhciIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJFcnJvciIsIm1lc3NhZ2UiLCJ2YXJpYW50IiwiYWRkVHJhbnNhY3Rpb24iLCJleHBlbnNlVG9JbnNlcnQiLCJhbW91bnQiLCJkYXRlIiwiY2F0ZWdvcnlfaWQiLCJ1c2VyX2lkIiwidHlwZSIsImluc2VydCIsInNpbmdsZSIsInVwZGF0ZVRyYW5zYWN0aW9uIiwiZXhwZW5zZVRvVXBkYXRlIiwidXBkYXRlIiwiZGVsZXRlVHJhbnNhY3Rpb24iLCJkZWxldGUiLCJnZXRNb250aFRyYW5zYWN0aW9ucyIsInN0YXJ0c1dpdGgiLCJnZXRNb250aFN1bW1hcnkiLCJtb250aFRyYW5zYWN0aW9ucyIsImluY29tZSIsInJlZHVjZSIsInN1bSIsImV4cGVuc2UiLCJiYWxhbmNlIiwiZ2V0TW9udGhDYXRlZ29yeVN1bW1hcnkiLCJjYXRlZ29yeVN1bW1hcnkiLCJmb3JFYWNoIiwiT2JqZWN0IiwiZW50cmllcyIsImNhdGVnb3J5Iiwic29ydCIsImEiLCJiIiwiZ2V0TGFzdFNpeE1vbnRoc1N1bW1hcnkiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJyZXZlcnNlIiwiZ2V0QWxsTW9udGhzU3VtbWFyeSIsIkFycmF5IiwiU2V0Iiwic3Vic3RyaW5nIiwibG9jYWxlQ29tcGFyZSIsIk51bWJlciIsImdldERvbGxhclZhbHVlIiwiZmluZCIsInVwZGF0ZURvbGxhclZhbHVlIiwidmFsdWUiLCJ1c2VyRXJyb3IiLCJ1cHNlcnREYXRhIiwidXBzZXJ0RXJyb3IiLCJ1cHNlcnQiLCJvbkNvbmZsaWN0IiwicHJldiIsIm5ld1ZhbHVlcyIsImluZGV4IiwiUHJvdmlkZXIiLCJ1c2VUcmFuc2FjdGlvbnMiLCJjb250ZXh0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./context/transaction-context.tsx\n"));

/***/ })

});